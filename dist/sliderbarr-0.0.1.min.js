(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a){this._onMouseup=b(this._onMouseup,this),this._onSliderClick=b(this._onSliderClick,this),this._onHandleMousemove=b(this._onHandleMousemove,this),this._onHandleMousedown=b(this._onHandleMousedown,this),this._onHandleKeydown=b(this._onHandleKeydown,this),this._settings={el:null,max:100,min:0,value:25,bar:!0,step:1,onChange:null,onDrag:null},this._activeDrag=!1,this._sliderAttr={},this._cache=[],$.extend(this._settings,a),this._validateHandles(),this._render(),this._initSelectors(),this._initEvents(),this._renderHandleChanges()}return"use strict",a.prototype._validateHandles=function(){this._settings.step!==1&&(this._settings.value=Math.round(this._settings.value/this._settings.step)*this._settings.step),this._settings.value>this._settings.max&&(this._settings.value=this._settings.max);if(this._settings.value<this._settings.min)return this._settings.value=this._settings.min},a.prototype._render=function(){return this._settings.bar&&this._settings.el.append('<span class="bar"></span>'),this._settings.el.append('<a href="#" class="handle"></a>')},a.prototype._initSelectors=function(){return this._cache.document=$(document),this._cache.slider=this._settings.el,this._settings.bar&&(this._cache.bar=this._settings.el.find(".bar")),this._cache.handle=this._settings.el.find(".handle"),this._sliderAttr={width:this._cache.slider.outerWidth(),leftOffset:this._cache.slider.offset().left}},a.prototype._initEvents=function(){return this._cache.handle.on("keydown",this._onHandleKeydown),this._cache.handle.on("mousedown",this._onHandleMousedown),this._cache.slider.on("click",this._onSliderClick),this._cache.document.on("mouseup",this._onMouseup)},a.prototype._changeHandle=function(a){return this._settings.value=this._settings.value+(a==="r"?this._settings.step:-this._settings.step),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange()},a.prototype._renderHandleChanges=function(){this._cache.handle.css("left",this._settings.value+"%");if(this._settings.bar)return this._cache.bar.css({width:this._settings.value+"%"})},a.prototype._onHandleKeydown=function(a){var b,c;if((b=a.keyCode)===37||b===38||b===39||b===40||b===65||b===68||b===83||b===87)return this._changeHandle((c=a.keyCode)===37||c===40||c===65||c===83?"l":"r")},a.prototype._onHandleMousedown=function(a){return this._activeDrag=!0,this._cache.document.on("mousemove",this._onHandleMousemove),!1},a.prototype._onHandleMousemove=function(a){if(this._activeDrag)return this._setSliderValueOnDrag(a)},a.prototype._onSliderClick=function(a){return this._settings.value=this._getValFromMouseEvent(a),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange(),this._cache.handle.focus(),!1},a.prototype._onMouseup=function(a){return this._activeDrag&&(this._setSliderValueOnDrag(a),this._fireOnChange(),this._cache.handle.focus()),this._activeDrag=!1,!1},a.prototype._fireOnChange=function(){if(this._settings.onChange!==null)return this._settings.onChange(this._settings.value)},a.prototype._getValFromMouseEvent=function(a){return parseInt((a.pageX-this._sliderAttr.leftOffset)/this._sliderAttr.width*100,10)},a.prototype._setSliderValueOnDrag=function(a){return this._settings.value=this._getValFromMouseEvent(a),this._validateHandles(),this._settings.onDrag!==null&&this._settings.onDrag(this._settings.value),this._renderHandleChanges()},a}(),typeof define=="function"&&define.amd?define("SliderBarr",[],function(){return a}):window.SliderBarr=a}).call(this);